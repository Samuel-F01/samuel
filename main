<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Samuel — Portfolio d’apps, simple & puissant</title>
  <meta name="description" content="Catalogue d’apps Samuel : cartes cliquables, fiches détaillées, recherche/filtre, carrousel de captures. Design soigné inspiré d’Apple." />
  <meta name="color-scheme" content="dark" />
  <style>
    /* ====== RESET + ACCESSIBILITÉ ====== */
    *,*::before,*::after{box-sizing:border-box}
    html:focus-within{scroll-behavior:smooth}
    body{margin:0;line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Helvetica,Arial,sans-serif}
    img,svg,video,canvas{max-width:100%;display:block}
    input,button,textarea,select{font:inherit}
    a{color:inherit;text-decoration:none}
    :focus-visible{outline:2px solid currentColor;outline-offset:3px;border-radius:6px}

    /* ====== THEME (Forcé sombre) ====== */
    :root{
      --bg:#0b0b0c;--text:#f5f5f7;--muted:#bdbdc2;--link:#6aa3ff;--card:#151517;--border:#2a2a2e;--accent:#6aa3ff;--shadow:0 16px 48px rgba(0,0,0,.55);--radius:20px;--container:1340px
    }
    body{background:var(--bg);color:var(--text)}

    /* ====== LAYOUT ====== */
    .container{max-width:var(--container);margin-inline:auto;padding-inline:28px}
    .hidden-visually{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);width:1px;height:1px;overflow:hidden;white-space:nowrap;user-select:none}

    /* ====== HEADER ====== */
    header{position:sticky;top:0;z-index:50;background:color-mix(in srgb, var(--bg) 70%, transparent);backdrop-filter:saturate(180%) blur(14px);border-bottom:1px solid color-mix(in srgb, var(--border) 60%, transparent)}
    .nav{display:flex;align-items:center;justify-content:space-between;min-height:74px}
    .brand{display:flex;gap:12px;align-items:center;font-weight:700;letter-spacing:.2px}
    .brand-badge{width:24px;height:24px;border-radius:7px;background:linear-gradient(135deg,#0ea5e9,#6366f1)}
    .nav a{padding:12px 14px;border-radius:12px}
    .nav a:hover{background:var(--card)}
    .nav-actions{display:flex;gap:10px;align-items:center}
    .btn,.btn-ghost{padding:12px 18px;border-radius:999px;border:1px solid var(--border);background:var(--bg);cursor:pointer;transition:transform .15s ease, box-shadow .2s ease, background .2s ease}
    .btn{background:var(--text);color:var(--bg);border-color:transparent}
    .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
    .btn-ghost:hover{background:var(--card)}
    .menu-toggle{display:none}

    /* ====== HERO ====== */
    .hero{position:relative;isolation:isolate}
    .hero-wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:46px;align-items:center;padding:92px 0}
    .kicker{color:var(--muted);font-weight:600;letter-spacing:.12em;text-transform:uppercase}
    .hero h1{font-size:clamp(44px,7.6vw,90px);line-height:1.04;margin:16px 0 20px;letter-spacing:-.02em}
    .hero p{font-size:clamp(17px,2.1vw,22px);color:var(--muted);max-width:56ch}
    .hero-cta{display:flex;gap:12px;margin-top:28px;flex-wrap:wrap}
    .hero-media{aspect-ratio:4/3;border-radius:var(--radius);background:
      radial-gradient(1200px 600px at 80% -10%, color-mix(in srgb,var(--accent) 35%, transparent) 0, transparent 60%),
      linear-gradient(180deg, color-mix(in srgb,var(--card) 80%, transparent), transparent 40%),
      var(--card);display:grid;place-items:center;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}
    .device{width:min(92%,560px);aspect-ratio:10/6;border-radius:26px;border:1px solid var(--border);background:linear-gradient(180deg,#0f0f11,#1a1a1e);position:relative;box-shadow:0 24px 70px rgba(0,0,0,.35)}
    .device-notch{position:absolute;top:0;left:50%;transform:translateX(-50%);width:30%;height:14px;background:#0a0a0d;border-radius:0 0 14px 14px;border:1px solid #1d1d22;border-top:none}
    .device-screen{position:absolute;inset:10px;border-radius:18px;overflow:hidden;border:1px solid #222;background:radial-gradient(60% 60% at 15% 15%, #2f76ff 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #8b5cf6 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)}
    .device-caption{position:absolute;bottom:14px;left:16px;color:#c7d2fe;font-size:14px;opacity:.9}

    /* ====== TOOLBAR (recherche/filtre/tri) ====== */
    .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin:18px 0}
    .search{flex:1 1 340px;min-width:260px;padding:12px 14px;border:1px solid var(--border);border-radius:14px;background:var(--bg);color:var(--text)}
    .select{padding:12px 14px;border:1px solid var(--border);border-radius:14px;background:var(--bg);color:var(--text)}
    .count{color:var(--muted);font-size:14px}

    /* ====== APPS ====== */
    .filters{display:flex;flex-wrap:wrap;gap:10px;margin:16px 0}
    .chip{border:1px solid var(--border);border-radius:999px;padding:10px 14px;background:var(--bg);color:var(--muted);cursor:pointer;user-select:none}
    .chip[aria-pressed="true"],.chip:hover{background:var(--card);color:var(--text)}
    .apps-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:26px}
    @media (min-width:1280px){.apps-grid{grid-template-columns:repeat(4,1fr)}}
    .app-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;position:relative;transition:transform .2s ease, box-shadow .2s ease;cursor:pointer}
    .app-card:hover{transform:translateY(-4px);box-shadow:var(--shadow)}
    .app-media{aspect-ratio:4/3;background:linear-gradient(180deg,rgba(255,255,255,.06),transparent),var(--bg);display:grid;place-items:center;position:relative}
    .app-icon{width:56px;height:56px;border-radius:16px;background:linear-gradient(135deg,#2f76ff,#8b5cf6);box-shadow:0 10px 26px rgba(0,0,0,.2);transition:transform .25s ease}
    .app-card:hover .app-icon{transform:scale(1.06)}
    .ribbon{position:absolute;top:10px;left:10px;padding:6px 10px;border-radius:10px;background:color-mix(in srgb,var(--accent) 25%, transparent);border:1px solid var(--border);font-size:12px;color:var(--text)}
    .app-body{padding:20px 20px 22px}
    .app-eyebrow{color:var(--muted);text-transform:uppercase;letter-spacing:.12em;font-size:12px}
    .app-card h3{margin:.35rem 0;font-size:22px;letter-spacing:-.02em}
    .app-card p{color:var(--muted);margin:0}
    .badge{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--bg);color:var(--muted);font-size:12px}
    mark{background:color-mix(in srgb,var(--accent) 35%, transparent);color:inherit;border-radius:4px;padding:0 .12em}

    /* ====== DIALOGS (fiches & infos) ====== */
    dialog{border:none;border-radius:28px;padding:0;background:var(--bg);color:var(--text);max-width:980px;width:min(92vw,980px);box-shadow:0 40px 120px rgba(0,0,0,.4)}
    dialog::backdrop{background:rgba(0,0,0,.35)}
    .sheet{display:grid;grid-template-columns:1fr 1fr;gap:0;overflow:hidden;border-radius:28px}
    .sheet-media{background:linear-gradient(180deg,color-mix(in srgb,var(--accent) 18%, transparent),transparent),var(--card);padding:28px;display:grid;place-items:center;border-right:1px solid var(--border);position:relative}
    .carousel-nav{position:absolute;inset:auto 0 16px 0;display:flex;justify-content:center;gap:10px}
    .circle{width:40px;height:40px;border-radius:999px;border:1px solid var(--border);background:var(--bg);display:grid;place-items:center;cursor:pointer}
    .sheet-content{padding:28px 28px 22px}
    .sheet h2{font-size:clamp(26px,4vw,40px);letter-spacing:-.02em;margin:0}
    .sheet p{color:var(--muted);margin:10px 0 14px}
    .features{margin:12px 0 18px;color:var(--muted);padding-left:18px}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 16px}
    .pill{border:1px solid var(--border);background:var(--bg);color:var(--muted);border-radius:999px;padding:6px 10px;font-size:12px}
    .stores{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0}
    .store{border:1px solid var(--border);border-radius:12px;padding:10px 12px;background:var(--bg)}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .close{position:absolute;top:14px;right:14px}
    @keyframes sheetIn{from{opacity:0;transform:translateY(8px) scale(.98)}to{opacity:1;transform:none}}
    dialog[open]{animation:sheetIn .2s ease}

    /* ====== INFO STRIP / SPLIT / CTA / FOOTER ====== */
    .strip{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:30px 0 10px}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:center;margin:46px 0 96px}
    .panel{border:1px solid var(--border);border-radius:var(--radius);background:var(--card);padding:32px;min-height:320px}
    .panel h2{font-size:clamp(28px,4vw,44px);letter-spacing:-.02em;margin:0 0 10px}
    .cta{background:linear-gradient(180deg,color-mix(in srgb,var(--text) 8%, transparent),transparent),var(--card);border:1px solid var(--border);border-radius:calc(var(--radius) + 8px);padding:40px;display:flex;align-items:center;justify-content:space-between;gap:22px;margin:12px 0 96px}
    .cta p{color:var(--muted);margin:6px 0 0}
    footer{padding:44px 0 68px;border-top:1px solid var(--border);color:var(--muted)}
    .footgrid{display:grid;grid-template-columns:2fr repeat(3,1fr);gap:28px}
    .footgrid h4{color:var(--text);margin:0 0 10px}
    .footgrid a{display:block;padding:6px 0;color:var(--muted)}
    .legal{margin-top:26px;font-size:14px}

    /* ====== RESPONSIVE ====== */
    @media (max-width:1100px){.sheet{grid-template-columns:1fr}}
    @media (max-width:1024px){.hero-wrap{grid-template-columns:1fr;gap:24px;padding:68px 0}.split{grid-template-columns:1fr}.apps-grid{grid-template-columns:1fr 1fr}.footgrid{grid-template-columns:1fr 1fr}}
    @media (max-width:640px){.strip{grid-template-columns:1fr;gap:10px}.apps-grid{grid-template-columns:1fr}.cta{flex-direction:column;align-items:flex-start}.nav-links{display:none}.menu-toggle{display:inline-flex}}

    @media (prefers-reduced-motion: reduce){.btn,.app-card,dialog{transition:none;animation:none}html{scroll-behavior:auto}}
  </style>
</head>
<body>
  <a class="hidden-visually" href="#contenu">Aller au contenu</a>

  <!-- ====== HEADER ====== -->
  <header>
    <div class="container nav">
      <div class="brand" aria-label="Samuel, accueil">
        <div class="brand-badge" aria-hidden="true"></div>
        <span>Samuel</span>
      </div>
      <nav class="nav-links" aria-label="Navigation principale">
        <a href="#apps">Apps</a>
        <a href="#presentation">Présentation</a>
        <a href="#" data-modal="support">Assistance</a>
        <a href="#" data-modal="contact">Contact</a>
      </nav>
      <div class="nav-actions">
        <button class="btn-ghost" onclick="document.querySelector('#apps').scrollIntoView({behavior:'smooth'})">Parcourir</button>
        <button class="menu-toggle btn-ghost" aria-label="Ouvrir le menu" onclick="toggleMenu()">☰</button>
      </div>
    </div>
  </header>

  <main id="contenu">
    <!-- ====== HERO ====== -->
    <section class="hero">
      <div class="container hero-wrap">
        <div>
          <div class="kicker">Écosystème Samuel</div>
          <h1>Mes apps, simples. <br>Votre journée, plus fluide.</h1>
          <p>Portfolio d’apps conçu pour aller droit au but : typographie nette, animations discrètes et une expérience focalisée sur vos tâches.</p>
          <div class="hero-cta">
            <a class="btn" href="#apps" aria-label="Voir les apps">Voir les apps</a>
            <a class="btn-ghost" href="#presentation" aria-label="Voir la présentation">Comment c’est conçu</a>
            <a class="btn-ghost" href="#" data-modal="support" aria-label="Assistance">Assistance</a>
          </div>
          <div class="strip" aria-hidden="true">
            <div class="badge">Synchronisation multi‑appareils</div>
            <div class="badge">Confidentialité par défaut</div>
            <div class="badge">Performances natives</div>
          </div>
        </div>

        <div class="hero-media" aria-label="Aperçu d’app">
          <div class="device">
            <div class="device-notch" aria-hidden="true"></div>
            <div class="device-screen">
              <span class="device-caption">Samuel Apps • 9:41</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ====== APPS (catalogue) ====== -->
    <section id="apps" class="container">
      <div class="toolbar" role="region" aria-label="Recherche et tri">
        <input id="search" class="search" type="search" placeholder="Rechercher une app (⌘K)" aria-label="Rechercher une app" />
        <div style="display:flex;gap:10px;align-items:center">
          <select id="sort" class="select" aria-label="Trier">
            <option value="name">Nom A→Z</option>
            <option value="new">Nouveautés</option>
          </select>
          <span class="count" id="count" aria-live="polite">6 apps</span>
        </div>
      </div>

      <div class="filters" role="toolbar" aria-label="Filtres catégories">
        <button class="chip" data-filter="*" aria-pressed="true">Tout</button>
        <button class="chip" data-filter="Jeux">Jeux</button>
        <button class="chip" data-filter="Utilitaires">Utilitaires</button>
        <button class="chip" data-filter="Éducation">Éducation</button>
        <button class="chip" data-filter="IA">IA</button>
      </div>

      <div class="apps-grid" role="list" id="grid">
        <article class="app-card" role="listitem" tabindex="0" data-app="tictactoe" data-category="Jeux" data-created="2024-06-01" data-title="Le classique, peaufiné." data-desc="IA ou 2 joueurs, thèmes et stats.">
          <div class="app-media"><div class="app-icon" aria-hidden="true" style="background:linear-gradient(135deg,#22c55e,#4ade80)"></div></div>
          <div class="app-body"><span class="app-eyebrow">Tic Tac Toe</span><h3>Le classique, peaufiné.</h3><p>IA ou 2 joueurs, thèmes et stats.</p></div>
        </article>
        <article class="app-card" role="listitem" tabindex="0" data-app="tictactoe_lite" data-category="Jeux" data-created="2024-07-15" data-title="Léger & instantané." data-desc="Parties rapides hors‑ligne.">
          <div class="app-media"><div class="app-icon" aria-hidden="true" style="background:linear-gradient(135deg,#86efac,#22c55e)"></div></div>
          <div class="app-body"><span class="app-eyebrow">Tic Tac Toe Lite</span><h3>Léger & instantané.</h3><p>Parties rapides hors‑ligne.</p></div>
        </article>
        <article class="app-card" role="listitem" tabindex="0" data-app="kingclock" data-category="Utilitaires" data-created="2024-08-20" data-title="Horloge d’échecs pro." data-desc="Presets, incréments/délais, sons.">
          <div class="app-media"><div class="app-icon" aria-hidden="true" style="background:linear-gradient(135deg,#f59e0b,#f97316)"></div><span class="ribbon">Mis à jour</span></div>
          <div class="app-body"><span class="app-eyebrow">KingClock</span><h3>Horloge d’échecs pro.</h3><p>Presets, incréments/délais, sons.</p></div>
        </article>
        <article class="app-card" role="listitem" tabindex="0" data-app="chessstreak" data-category="Éducation" data-created="2024-10-01" data-title="Tactiques quotidiennes." data-desc="Enchaînez les puzzles, progressez.">
          <div class="app-media"><div class="app-icon" aria-hidden="true" style="background:linear-gradient(135deg,#60a5fa,#3b82f6)"></div></div>
          <div class="app-body"><span class="app-eyebrow">ChessStreak</span><h3>Tactiques quotidiennes.</h3><p>Enchaînez les puzzles, progressez.</p></div>
        </article>
        <article class="app-card" role="listitem" tabindex="0" data-app="quatre" data-category="Jeux" data-created="2025-01-10" data-title="Simple & malin." data-desc="IA ou local, variantes fun.">
          <div class="app-media"><div class="app-icon" aria-hidden="true" style="background:linear-gradient(135deg,#ef4444,#fb7185)"></div><span class="ribbon">Nouveau</span></div>
          <div class="app-body"><span class="app-eyebrow">Quatre en ligne</span><h3>Simple & malin.</h3><p>IA ou local, variantes fun.</p></div>
        </article>
        <article class="app-card" role="listitem" tabindex="0" data-app="chatbot" data-category="IA" data-created="2025-03-05" data-title="Réponses rapides." data-desc="Prompts enregistrés, mode focus.">
          <div class="app-media"><div class="app-icon" aria-hidden="true" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6)"></div><span class="ribbon">Nouveau</span></div>
          <div class="app-body"><span class="app-eyebrow">Mini Chatbot</span><h3>Réponses rapides.</h3><p>Prompts enregistrés, mode focus.</p></div>
        </article>
      </div>
    </section>

    <!-- ====== PRÉSENTATION ====== -->
    <section id="presentation" class="container split">
      <div class="panel">
        <h2>Des apps qui respirent.</h2>
        <p style="color:var(--muted)">Interface aérée, hiérarchie claire, contrastes soignés. Le contenu reste au centre : titres généreux, typographie précise, transitions mesurées.</p>
        <ul style="margin-top:14px;color:var(--muted);padding-left:18px">
          <li>Animations subtiles (respect de « Réduire les animations »).</li>
          <li>Grilles fluides, composants réutilisables.</li>
          <li>Mode sombre soigné.</li>
        </ul>
      </div>
      <div class="panel">
        <h2>Un écosystème cohérent.</h2>
        <p style="color:var(--muted)">Icônes arrondies, boutons pilule, surfaces légèrement texturées : un vocabulaire visuel partagé.</p>
        <div class="hero-cta" style="margin-top:16px">
          <button class="btn" onclick="alert('Démo — transitions d’interface')">Voir la démo</button>
          <a class="btn-ghost" href="#" data-modal="support">Assistance</a>
        </div>
      </div>
    </section>

    <!-- ====== CTA ====== -->
    <section class="container">
      <div class="cta">
        <div>
          <h3 style="margin:0;font-size:clamp(22px,3vw,30px);letter-spacing:-.02em">Passez aux apps Samuel aujourd’hui.</h3>
          <p>Installez, synchronisez et jouez en quelques minutes.</p>
        </div>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn" href="#apps">Voir les apps</a>
          <a class="btn-ghost" href="#" data-modal="contact">Contact</a>
          <a class="btn-ghost" href="#" data-modal="support">Assistance</a>
        </div>
      </div>
    </section>

    <!-- ====== ASSISTANCE ====== -->
    <section id="assistance" class="container" style="margin-bottom:40px">
      <h2 style="font-size:clamp(28px,4vw,40px);letter-spacing:-.02em;margin:0 0 14px">Assistance & Ressources</h2>
      <p style="color:var(--muted);max-width:60ch;margin:0 0 18px">Guides, FAQ et bonnes pratiques pour tirer le meilleur de mes apps.</p>
      <div class="apps-grid" role="list" style="margin:0">
        <article class="app-card" role="listitem"><div class="app-body"><span class="app-eyebrow">Guides</span><h3>Démarrage rapide</h3><p>Installez, migrez, personnalisez en 10 minutes.</p></div></article>
        <article class="app-card" role="listitem"><div class="app-body"><span class="app-eyebrow">Communauté</span><h3>Forum des utilisateurs</h3><p>Posez des questions et partagez vos conseils.</p></div></article>
        <article class="app-card" role="listitem"><div class="app-body"><span class="app-eyebrow">Pro</span><h3>Centre développeurs</h3><p>SDK, API et exemples d’intégration.</p></div></article>
      </div>
    </section>
  </main>

  <!-- ====== FOOTER ====== -->
  <footer>
    <div class="container">
      <div class="footgrid">
        <div>
          <div class="brand" style="margin-bottom:10px">
            <div class="brand-badge" aria-hidden="true"></div><span>Samuel</span>
          </div>
          <p>Des apps qui allient simplicité et performance.</p>
        </div>
        <div>
          <h4>Apps</h4>
          <a href="#apps">Tic Tac Toe</a>
          <a href="#apps">ChessStreak</a>
          <a href="#apps">KingClock</a>
        </div>
        <div>
          <h4>Ressources</h4>
          <a href="#" data-modal="support">Guides</a>
          <a href="#" data-modal="support">Centre développeurs</a>
          <a href="#" data-modal="support">Statut</a>
        </div>
        <div>
          <h4>Entreprise</h4>
          <a href="#">À propos</a>
          <a href="#">Carrières</a>
          <a href="#" data-modal="contact">Contact</a>
        </div>
      </div>
      <div class="legal">© <span id="year"></span> Samuel. Inspiré d’un style minimaliste. Pas affilié à Apple.</div>
    </div>
  </footer>

  <!-- ====== DIALOG FICHE APP ====== -->
  <dialog id="app-dialog" aria-labelledby="app-title" aria-describedby="app-desc">
    <button class="btn-ghost close" aria-label="Fermer" onclick="closeDialog('app')">✕</button>
    <div class="sheet">
      <div class="sheet-media">
        <div class="device" aria-hidden="true">
          <div class="device-notch"></div>
          <div class="device-screen" id="app-visual"></div>
        </div>
        <div class="carousel-nav">
          <button class="circle" id="prevShot" aria-label="Capture précédente">‹</button>
          <button class="circle" id="nextShot" aria-label="Capture suivante">›</button>
        </div>
      </div>
      <div class="sheet-content">
        <h2 id="app-title">Titre app</h2>
        <div class="meta" id="app-meta"></div>
        <p id="app-desc">Description app…</p>
        <ul class="features" id="app-features"></ul>
        <div class="stores" id="app-stores"></div>
        <div class="actions">
          <a class="btn" id="cta-primary" href="#">Télécharger</a>
          <a class="btn-ghost" id="cta-secondary" href="#">Essayer sur le Web</a>
        </div>
      </div>
    </div>
  </dialog>

  <!-- ====== DIALOG INFO (Assistance / Contact) ====== -->
  <dialog id="form-dialog" aria-labelledby="form-title" aria-describedby="form-desc">
    <button class="btn-ghost close" aria-label="Fermer" onclick="closeDialog('form')">✕</button>
    <div class="sheet">
      <div class="sheet-media" id="form-visual">
        <div class="device" aria-hidden="true">
          <div class="device-notch"></div>
          <div class="device-screen" style="background:radial-gradient(60% 60% at 15% 15%, #0ea5e9 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #22d3ee 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)"></div>
        </div>
      </div>
      <div class="sheet-content">
        <h2 id="form-title">Informations</h2>
        <p id="form-desc">Toutes les infos utiles d’un coup d’œil.</p>
        <ul class="features" id="info-list"></ul>
        <div class="actions">
          <button type="button" class="btn-ghost" onclick="closeDialog('form')">Fermer</button>
        </div>
      </div>
    </div>
  </dialog>

  <script>
    // ====== UTIL ======
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // Année dynamique
    $('#year').textContent = new Date().getFullYear();

    // Mini menu mobile
    function toggleMenu(){ const nav = document.querySelector('.nav-links'); if(!nav) return; const visible = getComputedStyle(nav).display !== 'none'; nav.style.display = visible ? 'none' : 'block'; }

    // Ombre header au scroll
    const header = document.querySelector('header');
    let last = 0; addEventListener('scroll', ()=>{ const y = scrollY || pageYOffset; if(y>8 && last<=8){ header.style.boxShadow='0 8px 30px rgba(0,0,0,.18)'; } if(y<=8 && last>8){ header.style.boxShadow='none'; } last=y; }, {passive:true});

    // ====== DATA APPS (Samuel) ======
    const APPS = {
      tictactoe: {
        name:'Tic Tac Toe',
        summary:'IA ou 2 joueurs, thèmes et statistiques.',
        features:['Mode IA ou local','Grille 3×3 classique','Statistiques de série','Thèmes personnalisables'],
        gradient:'radial-gradient(60% 60% at 15% 15%, #22c55e 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #4ade80 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)',
        price:'Gratuit', platforms:['iOS','Android','Web'],
        links:{ios:'#',android:'#',web:'#'},
        screens:['linear-gradient(180deg,#1a1a1e,#0d0d12)','linear-gradient(180deg,#0d0d12,#131318)','linear-gradient(180deg,#131318,#0e0e12)']
      },
      tictactoe_lite: {
        name:'Tic Tac Toe Lite',
        summary:'Version légère orientée vitesse — parfait hors‑ligne.',
        features:['Démarrage instantané','Aucune connexion requise','Score rapide','Interface épurée'],
        gradient:'radial-gradient(60% 60% at 15% 15%, #86efac 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #22c55e 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)',
        price:'Gratuit', platforms:['Android','Web'], links:{ios:'#',android:'#',web:'#'},
        screens:['linear-gradient(180deg,#19231a,#0d1a12)','linear-gradient(180deg,#101510,#0f1712)']
      },
      kingclock: {
        name:'KingClock',
        summary:'Horloge d’échecs pro : presets, incréments et délais.',
        features:['Presets classiques','Incrément/Fischer & Délai/Bronstein','Retour haptique/son (option)','Grand affichage clair'],
        gradient:'radial-gradient(60% 60% at 15% 15%, #f59e0b 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #f97316 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)',
        price:'Gratuit avec achats', platforms:['iOS','Android'], links:{ios:'#',android:'#',web:'#'},
        screens:['linear-gradient(180deg,#1f1402,#120a00)','linear-gradient(180deg,#2b1d05,#1a0f02)']
      },
      chessstreak: {
        name:'ChessStreak',
        summary:'Tactiques quotidiennes pour progresser régulièrement.',
        features:['Puzzles progressifs','Séries quotidiennes','Explication des motifs','Stats de progression'],
        gradient:'radial-gradient(60% 60% at 15% 15%, #60a5fa 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #3b82f6 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)',
        price:'Gratuit', platforms:['Web'], links:{ios:'#',android:'#',web:'#'},
        screens:['linear-gradient(180deg,#0f172a,#0b1220)','linear-gradient(180deg,#101826,#0c1422)','linear-gradient(180deg,#0c1422,#0a111c)']
      },
      quatre: {
        name:'Quatre en ligne',
        summary:'Affrontez l’IA ou un ami en local — variantes incluses.',
        features:['IA multi‑niveaux','2 joueurs local','Grilles variantes','Rejouer instantanément'],
        gradient:'radial-gradient(60% 60% at 15% 15%, #ef4444 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #fb7185 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)',
        price:'Gratuit', platforms:['iOS','Web'], links:{ios:'#',android:'#',web:'#'},
        screens:['linear-gradient(180deg,#2a0f13,#19080a)','linear-gradient(180deg,#3a0f17,#250b0e)']
      },
      chatbot: {
        name:'Mini Chatbot',
        summary:'Réponses rapides et prompts enregistrés pour brainstormer.',
        features:['Prompts favoris','Mode focus','Copie en un tap','Historique local'],
        gradient:'radial-gradient(60% 60% at 15% 15%, #a78bfa 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, #8b5cf6 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)',
        price:'Gratuit', platforms:['Web'], links:{ios:'#',android:'#',web:'#'},
        screens:['linear-gradient(180deg,#1b1427,#120d1b)','linear-gradient(180deg,#231936,#171125)']
      }
    };

    // ====== DIALOGS helpers ======
    const appDialog = $('#app-dialog');
    const appVisual = $('#app-visual');
    const appTitle = $('#app-title');
    const appDesc = $('#app-desc');
    const appFeats = $('#app-features');
    const appMeta = $('#app-meta');
    const appStores = $('#app-stores');
    const ctaPrimary = $('#cta-primary');
    const ctaSecondary = $('#cta-secondary');
    const prevShot = $('#prevShot');
    const nextShot = $('#nextShot');
    let currentShots = []; let shotIndex = 0;

    function renderShot(i){ if(!currentShots.length) return; appVisual.style.background = currentShots[i]; }

    function openAppDialog(key){
      const app = APPS[key]; if(!app) return;
      appDialog.dataset.key = key;
      appTitle.textContent = app.name; appDesc.textContent = app.summary;
      appVisual.style.background = app.gradient; appVisual.style.border = '1px solid #222';
      // features
      appFeats.innerHTML = ''; app.features.forEach(f=>{ const li = document.createElement('li'); li.textContent = f; appFeats.appendChild(li); });
      // meta
      appMeta.innerHTML = '';
      const price = document.createElement('span'); price.className='pill'; price.textContent = app.price; appMeta.appendChild(price);
      app.platforms.forEach(p=>{ const s=document.createElement('span'); s.className='pill'; s.textContent=p; appMeta.appendChild(s); });
      // stores
      appStores.innerHTML = '';
      if(app.links.ios && app.links.ios!=='#'){ const a=document.createElement('a'); a.href=app.links.ios; a.className='store'; a.textContent='App Store'; appStores.appendChild(a); }
      if(app.links.android && app.links.android!=='#'){ const a=document.createElement('a'); a.href=app.links.android; a.className='store'; a.textContent='Google Play'; appStores.appendChild(a); }
      if(app.links.web && app.links.web!=='#'){ const a=document.createElement('a'); a.href=app.links.web; a.className='store'; a.textContent='Web'; appStores.appendChild(a); }
      if(!appStores.children.length){ const s=document.createElement('span'); s.className='pill'; s.textContent='Bientôt sur les stores'; appStores.appendChild(s); }
      // CTAs par défaut
      ctaPrimary.style.background = 'var(--text)'; ctaPrimary.href = app.links.ios||app.links.web||'#'; ctaPrimary.textContent = (app.links.ios && app.links.ios!=='#') ? 'Télécharger iOS' : 'Essayer maintenant';
      ctaSecondary.href = app.links.web || '#'; ctaSecondary.textContent = 'Version Web';
      // Screens
      currentShots = (app.screens && app.screens.length) ? app.screens : [app.gradient]; shotIndex = 0; renderShot(shotIndex);
      try{ appDialog.showModal(); }catch{ appDialog.setAttribute('open',''); }
      pushHash(`#app-${key}`, appDialog);
    }

    function closeDialog(which){
      const d = which==='app'? appDialog : $('#form-dialog'); try{ d.close(); }catch{ d.removeAttribute('open'); }
      const prev = d.dataset.prevhash || ''; if(history.pushState){ history.pushState(null,'', prev || ' '); }
    }

    function pushHash(newHash, d){ const prev = location.hash; d.dataset.prevhash = prev; if(history.pushState){ history.pushState(null,'', newHash); } }

    // Attach card handlers
    $$('.app-card').forEach(card=>{
      card.addEventListener('click', ()=> openAppDialog(card.dataset.app));
      card.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openAppDialog(card.dataset.app);} });
    });

    // Modal arrows & keys
    prevShot.addEventListener('click', ()=>{ if(!currentShots.length) return; shotIndex=(shotIndex-1+currentShots.length)%currentShots.length; renderShot(shotIndex); });
    nextShot.addEventListener('click', ()=>{ if(!currentShots.length) return; shotIndex=(shotIndex+1)%currentShots.length; renderShot(shotIndex); });
    appDialog.addEventListener('keydown', e=>{ if(e.key==='ArrowLeft') prevShot.click(); if(e.key==='ArrowRight') nextShot.click(); });

    // ====== INFO DIALOG (Contact / Assistance) ======
    const formDialog = $('#form-dialog');
    const formTitle = $('#form-title');
    const formDesc  = $('#form-desc');
    const infoList  = $('#info-list');
    const formVisual= $('#form-visual');

    const SHEETS = {
      contact:{title:'Contact',desc:'Comment me joindre rapidement.',accent:'#0ea5e9'},
      support:{title:'Assistance',desc:'Ressources et aide en self‑service.',accent:'#6366f1'}
    };

    const INFO = {
      contact:{
        items:[
          'Courriel : <a href="mailto:ton.email@exemple.com">ton.email@exemple.com</a>',
          'Réseaux : <a href="#">X</a> · <a href="#">Instagram</a>',
          'Code source / projets : <a href="#">github.com/ton-profil</a>'
        ]
      },
      support:{
        items:[
          'Guides : <a href="#">Démarrage rapide</a>',
          'FAQ : <a href="#">Questions fréquentes</a>',
          'Statut du service : <a href="#">page statut</a>'
        ]
      }
    };

    function setFormAccent(hex){
      formVisual.querySelector('.device-screen').style.background = `radial-gradient(60% 60% at 15% 15%, ${hex} 0%, transparent 60%),radial-gradient(60% 60% at 85% 85%, ${hex}66 0%, transparent 60%),linear-gradient(180deg,#0d0d12,#131318 55%,#0e0e12)`;
    }

    function openFormDialog(kind){
      const s = SHEETS[kind] || SHEETS.contact;
      formTitle.textContent = s.title;
      formDesc.textContent  = s.desc;
      setFormAccent(s.accent);
      infoList.innerHTML = '';
      (INFO[kind]?.items || []).forEach(html=>{ const li=document.createElement('li'); li.innerHTML = html; infoList.appendChild(li); });
      try{ formDialog.showModal(); }catch{ formDialog.setAttribute('open',''); }
      pushHash(`#${kind}`, formDialog);
    }

    // Global click handlers
    $$('[data-modal]').forEach(el=>{ el.addEventListener('click', e=>{ e.preventDefault(); openFormDialog(el.dataset.modal); }); });

    // Backdrop click/escape
    ;[appDialog, formDialog].forEach(d=>{
      d.addEventListener('click', (e)=>{ const r=d.querySelector('.sheet').getBoundingClientRect(); if(e.clientX<r.left||e.clientX>r.right||e.clientY<r.top||e.clientY>r.bottom){ closeDialog(d===appDialog?'app':'form'); }});
      d.addEventListener('cancel', (e)=>{ e.preventDefault(); closeDialog(d===appDialog?'app':'form'); });
    });

    // Deep‑links
    function checkHash(){ const h=(location.hash||'').replace('#',''); if(h.startsWith('app-')){ const key=h.split('app-')[1]; if(APPS[key]) openAppDialog(key); return; } if(['contact','support'].includes(h)){ openFormDialog(h); } }
    window.addEventListener('hashchange', checkHash); checkHash();

    // ====== RECHERCHE / FILTRES / TRI + surlignage ======
    const chips = $$('.chip');
    let activeCategory = '*';
    const search = $('#search');
    const sortSel = $('#sort');
    const grid = $('#grid');
    const count = $('#count');

    chips.forEach(ch=>ch.addEventListener('click', ()=>{ chips.forEach(c=>c.setAttribute('aria-pressed','false')); ch.setAttribute('aria-pressed','true'); activeCategory = ch.dataset.filter; applyFilters(); }));

    function highlight(el, original, q){
      if(!q || q.length<2){ el.textContent = original; return; }
      const idx = original.toLowerCase().indexOf(q);
      if(idx===-1){ el.textContent = original; return; }
      el.innerHTML = original.slice(0,idx)+ '<mark>' + original.slice(idx,idx+q.length) + '</mark>' + original.slice(idx+q.length);
    }

    function applyFilters(){
      const q = search.value.trim().toLowerCase();
      let cards = Array.from(grid.children);
      // filter + surlignage
      cards.forEach(card=>{
        const cat = card.dataset.category;
        const titleEl = card.querySelector('h3');
        const descEl  = card.querySelector('p');
        const title = card.dataset.title || titleEl.textContent;
        const desc  = card.dataset.desc  || descEl.textContent;
        const text = (title + ' ' + desc + ' ' + card.querySelector('.app-eyebrow').textContent).toLowerCase();
        const catOk = (activeCategory==='*' || cat===activeCategory);
        const qOk = (!q || text.includes(q));
        card.style.display = (catOk && qOk) ? '' : 'none';
        // surlignage
        highlight(titleEl, title, q);
        highlight(descEl,  desc,  q);
      });
      // sort
      const visible = cards.filter(c=>c.style.display!=='none');
      if(sortSel.value==='name') visible.sort((a,b)=> a.querySelector('h3').textContent.localeCompare(b.querySelector('h3').textContent));
      else if(sortSel.value==='new') visible.sort((a,b)=> new Date(b.dataset.created) - new Date(a.dataset.created));
      visible.forEach(c=>grid.appendChild(c));
      count.textContent = `${visible.length} app${visible.length>1?'s':''}`;
    }
    search.addEventListener('input', applyFilters);
    sortSel.addEventListener('change', applyFilters);
    applyFilters();

    // ⌘K pour focus recherche
    window.addEventListener('keydown', (e)=>{ if((e.metaKey||e.ctrlKey) && (e.key==='k'||e.key==='K')){ e.preventDefault(); search.focus(); } });

    /* ====== TESTS (auto) ====== */
    (function runTests(){
      const tests = [];
      const assert = (name, cond) => tests.push({name, pass: !!cond});
      try{
        assert('APPS contient 6 éléments', Object.keys(APPS).length === 6);
        assert('La grille contient 6 cartes', document.querySelectorAll('#grid .app-card').length === 6);
        assert('openAppDialog est défini', typeof openAppDialog === 'function');
        assert('openFormDialog est défini', typeof openFormDialog === 'function');
        assert('Aucun bouton expert', document.querySelectorAll('[data-modal="expert"]').length === 0);
        assert('Thème forcé sombre (pas de toggle)', !document.getElementById('themeToggle'));
      }catch(err){ console.error('Tests runtime — erreur:', err); }
      const failed = tests.filter(t=>!t.pass);
      console.table(tests);
      if(failed.length){ console.warn('Tests échoués:', failed.map(f=>f.name)); }
    })();
  </script>
</body>
</html>
